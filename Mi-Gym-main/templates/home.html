{% extends "base_home.html" %}
{% load static %}

{% block title %}MiGym ‚Äì Entren√° distinto{% endblock %}

{% block extra_css %}
<style>
  :root{ --mg-bg:#0e0e0f; --mg-panel:#151516; --mg-panel2:#1b1c1d; --mg-text:#f3f3f3; --mg-muted:#b6b6b6; --mg-orange:#ff7a00; --mg-teal:#1cc6d3; }
  body{ background:var(--mg-bg); color:var(--mg-text); margin: 0; padding: 0; }
  
  /* Eliminar padding del content-wrap para que el hero llegue al borde */
  .content-wrap { padding: 0 !important; }
  
  .hero {
    position: relative;
    width: 100%;
    min-height: 92svh;           /* ocupa casi toda la vista, sin romper el resto */
    overflow: hidden;
    background: #000;            /* no afecta otras secciones */
  }
  .hero__bg {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    object-fit: cover;
    /* mucho m√°s claro que antes */
    filter: brightness(.78) contrast(1.05);
    transform: scale(1.01);      /* evita "bandas" en algunos m√≥viles */
  }
  /* oscurecido SUAVE SOLO abajo para contraste del texto */
  .hero::after{
    content:""; position:absolute; left:0; right:0; bottom:0; top:40%;
    background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.55) 100%);
    pointer-events:none;
  }
  .hero__inner{
    position: relative;          /* por encima del overlay */
    display: grid; place-items: center;
    min-height: inherit;
    padding-inline: clamp(16px, 4vw, 28px);
  }
  .hero__content{
    width: min(92vw, 900px);
    text-align: center; color: #fff;
  }
  .hero__title{
    font-weight: 800; line-height: 1.12; margin: 0 0 .6rem;
    font-size: clamp(2rem, 5.2vw, 3.6rem);
  }
  .hero__title .o{ color:#ff7a00 }
  .hero__title .t{ color:#1cc6d3 }
  .hero__lead{
    color:#e0e0e0; margin:0 0 1.2rem;
    font-size: clamp(1rem, 2.6vw, 1.25rem);
  }
  .hero__cta{ display:flex; gap:.75rem; justify-content:center; flex-wrap:wrap }
  .btn-grad{
    background: linear-gradient(90deg, #1cc6d3, #ff7a00);
    color:#0a0a0b; font-weight:700; border:none;
    padding:.85rem 1.25rem; border-radius:999px; box-shadow:0 10px 24px rgba(0,0,0,.35);
    font-size: clamp(.95rem, 2.4vw, 1rem);
  }
  .btn-outline{
    background: transparent; color:#ff7a00; font-weight:700;
    padding:.8rem 1.2rem; border-radius:999px; border:2px solid #ff7a00;
    font-size: clamp(.95rem, 2.4vw, 1rem);
  }
  /* m√≥vil: botones apilados */
  @media (max-width: 480px){
    .btn-grad, .btn-outline{ width:100%; }
  }
  .btn-mg{ display:inline-block; font-weight:700; border:none; border-radius:10px;
           background:linear-gradient(90deg,var(--mg-teal),var(--mg-orange)); color:#0b0b0c;
           padding:.6rem 1.2rem; box-shadow:0 10px 24px rgba(0,0,0,.45); }
  .btn-outline{ display:inline-block; border:1px solid var(--mg-orange); color:#fff; padding:.55rem 1.1rem; border-radius:10px; }

  .slider{ position:relative; overflow:hidden; border-top:1px solid rgba(255,122,0,.22);}
  .slides{ display:flex; transition:transform .6s ease; }
  .slide{ min-width:100%; height:44vh; min-height:340px; background-size:cover; background-position:center; position:relative; filter:saturate(.9) contrast(.95);}
  .slide::before{ content:""; position:absolute; inset:0; background:linear-gradient(90deg, rgba(0,0,0,.68), rgba(0,0,0,.20) 60%, rgba(0,0,0,.68)); }
  .slide-cap{ position:absolute; inset:0; display:grid; place-items:center; text-align:center; padding:1rem }
  /* Improve caption readability on slides */
  .slider .slide-cap{ text-shadow:0 6px 18px rgba(0,0,0,.6); }
  .slider .slide-cap h2{ color: #fff; font-size: clamp(1.4rem, 3.2vw, 2rem); }
  .slider .slide-cap p{ color: var(--mg-muted); max-width:760px; }
  .slider .slide-cap .btn-grad{ padding:.7rem 1.4rem; font-weight:800; border-radius:999px; box-shadow:0 12px 30px rgba(0,0,0,.5); }
  /* slide caption panel to improve contrast */
  .slide-panel{ background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.35)); padding:24px; border-radius:12px; display:inline-block; }
  @media (max-width:768px){ .slide-panel{ padding:14px } .slider .slide-cap h2{ font-size:1.25rem } }
  .slider .ctrl{ position:absolute; top:50%; transform:translateY(-50%); background:#0008;
                 border:1px solid rgba(255,122,0,.45); color:#fff; width:42px; height:42px;
                 border-radius:10px; display:grid; place-items:center; cursor:pointer; }
  .prev{ left:14px } .next{ right:14px }

  .wrap{ width:min(1100px,92vw); margin:0 auto } .section{ padding:48px 0 }
  .section-title{ font-weight:800; letter-spacing:.3px; margin-bottom:18px }
  .grid{ display:grid; gap:14px } @media (min-width:768px){ .grid-3{ grid-template-columns:repeat(3,1fr) } }
  .service{ background:#151516; border:1px solid rgba(255,122,0,.22); border-radius:16px; padding:20px; transition:.18s; }
  .service:hover{ transform:translateY(-3px); box-shadow:0 16px 40px rgba(0,0,0,.35) }
  .muted{ color:var(--mg-muted) }
  .card{ background:#1b1c1d; border:1px solid rgba(28,198,211,.25); border-radius:16px; overflow:hidden; transition:.2s }
  .card:hover{ transform:translateY(-4px) } .card img{ width:100%; height:180px; object-fit:cover }
  .meta{ color:var(--mg-muted) }
  .testi{ background:linear-gradient(180deg,#151516,#121314); border:1px solid rgba(255,122,0,.22); border-radius:16px; padding:20px }
  .stars{ color:#ffcc66 }
  .cta{ background: radial-gradient(800px 400px at 50% -20%, rgba(28,198,211,.12), transparent),
                   radial-gradient(600px 350px at 50% 120%, rgba(255,122,0,.12), transparent),
                   linear-gradient(180deg, #111213, #0d0e0f);
        border:1px solid var(--mg-orange); border-radius:16px; padding:26px; text-align:center;
        box-shadow:0 0 0 6px rgba(255,122,0,.06);}

  /* CONTACTO: adaptar al theme oscuro de MiGym */
  #contacto{ background: linear-gradient(180deg, #0b0b0c, #0e0e0f); border-top:1px solid rgba(255,122,0,.03); }
  #contacto .wrap{ padding-top:10px; }
  #contacto .section-title{ color: #fff; }
  #contacto .muted{ color:var(--mg-muted); }
  #contacto .form-control{ background:#0f0f10; border:1px solid rgba(255,122,0,.06); color:var(--mg-text); }
  #contacto .form-control:focus{ box-shadow:0 0 0 3px rgba(28,198,211,.06); border-color:rgba(28,198,211,.25); }
  #contacto .form-control::placeholder{ color: rgba(255,255,255,.22); }
  #contacto .form-label{ color:var(--mg-text); }
  #contacto .btn-mg{ background: linear-gradient(90deg, #1cc6d3, #ff7a00); color:#070707; }
  #contacto .ratio iframe{ border:2px solid rgba(255,122,0,.06); border-radius:8px; }
  #contacto .alert{ background: linear-gradient(90deg, rgba(28,198,211,.04), rgba(255,122,0,.04)); color:var(--mg-text); border:1px solid rgba(255,122,0,.08); }
</style>
{% endblock %}

{% block content %}
  <!-- HERO -->
<section class="hero" aria-label="Portada MiGym">
  <img class="hero__bg" src="{% static 'img/fondo_login.png' %}" alt="">
  <div class="hero__inner">
    <div class="hero__content">
      <h1 class="hero__title">
        Entren√° con tecnolog√≠a.<br>
        <span class="o">Viv√≠</span> <span class="t">MiGym</span>.
      </h1>
      <p class="hero__lead">Planes flexibles, seguimiento inteligente y motivaci√≥n real.</p>
      <div class="hero__cta">
        <a href="#contacto" class="btn-grad">Comunicate con nosotros</a>
      </div>
    </div>
  </div>
</section>
<!-- note: 'Acerca' is embedded inside the first slide below (id="acerca") -->
  <!-- SLIDER -->
{% load static %}

{# resolvemos rutas primero #}
{% static 'img/slide1.jpg' as slide1 %}
{% static 'img/slide2.jpg' as slide2 %}
{% static 'img/slide3.png' as slide3 %}

<section class="slider" id="mgSlider">
  <div class="slides" id="mgSlides">
    <div class="slide" style="background-image:url('{{ slide1 }}')">
      <div class="slide-cap" id="acerca">
        <div style="max-width:880px; text-align:left;">
          <div class="slide-panel">
            <h2>Acerca de MiGym</h2>
            <p class="muted">MiGym combina clases presenciales con herramientas digitales para que lleves un seguimiento real de tu entrenamiento. Planes flexibles, control de ocupaci√≥n y m√©tricas claras para progresar.</p>
            <p class="muted">Solicit√° un pase de prueba gratuito o contactanos desde la secci√≥n de contacto m√°s abajo.</p>
            <div style="margin-top:12px; display:flex; gap:.6rem; flex-wrap:wrap;">
              <a href="#contacto" class="btn-grad">Contactanos</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="slide" style="background-image:url('{{ slide2 }}')">
      <div class="slide-cap">
        <div><h2>Med√≠ tu progreso</h2><p class="muted">Suscripciones simples, m√©tricas claras.</p></div>
      </div>
    </div>
    <div class="slide" style="background-image:url('{{ slide3 }}')">
      <div class="slide-cap">
        <div><h2>Espacios premium</h2><p class="muted">Equipamiento de primer nivel en todas las sedes.</p></div>
      </div>
    </div>
  </div>

  <button class="ctrl prev" data-dir="-1" aria-label="Anterior">‚Äπ</button>
  <button class="ctrl next" data-dir="1" aria-label="Siguiente">‚Ä∫</button>
</section>


  <!-- SERVICIOS -->
  <section class="section">
    <div class="wrap">
      <h3 class="section-title">Servicios</h3>
      <div class="grid grid-3">
        <div class="service"><h5>üèãÔ∏è Entrenamiento guiado</h5><p class="muted">Rutinas personalizadas por instructores certificados.</p></div>
        <div class="service"><h5>üë• Clases grupales</h5><p class="muted">Funcional, HIIT, yoga y m√°s, todos los d√≠as.</p></div>
        <div class="service"><h5>üîê Accesos inteligentes</h5><p class="muted">Ingreso r√°pido y control de ocupaci√≥n en vivo.</p></div>
      </div>
    </div>
  </section>

  <!-- CLASES DESTACADAS -->
  <section class="section">
    <div class="wrap">
      <h3 class="section-title">Clases destacadas</h3>
      <div class="grid grid-3">
        <div class="card">
          <img src="{% static 'img/MyGym.jpg' %}" alt="Funcional Pro">
          <div class="p-3"><h5>Funcional Pro</h5><div class="meta">Intensidad alta ¬∑ 50'</div></div>
        </div>
        <div class="card">
          <img src="{% static 'img/MyGym1.jpg' %}" alt="HIIT Xpress">
          <div class="p-3"><h5>HIIT Xpress</h5><div class="meta">Muy alta ¬∑ 30'</div></div>
        </div>
        <div class="card">
          <img src="{% static 'img/MyGym.2.jpg' %}" alt="Yoga Flow">
          <div class="p-3"><h5>Yoga Flow</h5><div class="meta">Media ¬∑ 45'</div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIOS -->
  <section class="section">
    <div class="wrap">
      <h3 class="section-title">Lo que dicen de MiGym</h3>
      <div class="grid">
        <div class="testi"><div style="display:flex;justify-content:space-between"><b>Vicky ¬∑ Caballito</b><span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></div><p class="mt-2 mb-0">Las clases son incre√≠bles y siempre hay lugar gracias al control de ocupaci√≥n. üí™</p></div>
        <div class="testi"><div style="display:flex;justify-content:space-between"><b>Mauro ¬∑ Centro</b><span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></div><p class="mt-2 mb-0">Me encant√≥ la app y poder ver mi progreso. Todo muy simple.</p></div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section">
    <div class="wrap">
      <div class="cta">
        <h3 class="fw-bold mb-1">¬øListo para empezar?</h3>
        <p class="muted">Unite hoy y prob√° 7 d√≠as con acceso a todas las clases.</p>
        <a href="https://wa.me/5491112223334?text=Hola!%20Quiero%20solicitar%20un%20pase%20de%20prueba%20para%20MiGym%20%F0%9F%8F%8B%EF%B8%8F" target="_blank" class="btn-mg">Quiero mi pase</a>
      </div>
    </div>
  </section>
  
  <!-- CONTACTO -->
  <section id="contacto" class="section">
    <div class="wrap">
      <h3 class="section-title">Contacto</h3>
      <div class="row g-4">
        <div class="col-md-6">
          <p class="muted">Ten√©s una duda, quer√©s contratar una clase o necesit√°s soporte t√©cnico? Dejanos tu mensaje y te respondemos a la brevedad.</p>
          <form id="contactForm" class="needs-validation" novalidate>
            <div id="contactAlert"></div>
            <div class="mb-3">
              <label for="c_name" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="c_name" name="name" required>
              <div class="invalid-feedback">Por favor ingresa tu nombre.</div>
            </div>
            <div class="mb-3">
              <label for="c_email" class="form-label">Correo electr√≥nico</label>
              <input type="email" class="form-control" id="c_email" name="email" required>
              <div class="invalid-feedback">Ingresa un correo v√°lido.</div>
            </div>
            <div class="mb-3">
              <label for="c_message" class="form-label">Mensaje</label>
              <textarea class="form-control" id="c_message" name="message" rows="4" required></textarea>
              <div class="invalid-feedback">Escribe un mensaje.</div>
            </div>
            <button type="submit" class="btn-mg">Enviar mensaje</button>
          </form>
        </div>
        <div class="col-md-6">
          <h5>Vis√≠tanos</h5>
          <p class="muted mb-2">MiGym - Centro Comercial ¬∑ Lunes a Viernes 7:00 - 22:00</p>
          <p class="muted mb-2">Tel: <a href="tel:+541112223334">(011) 1122-3334</a> ¬∑ Email: <a href="mailto:info@migym.example">info@migym.example</a></p>
          <div class="ratio ratio-16x9">
            <!-- Placeholder map / imagen -->
            <iframe src="https://www.google.com/maps?q=Buenos+Aires&output=embed" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal de √©xito -->
  <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="background: linear-gradient(180deg, #141414 0%, #1b1b1b 100%); border: 2px solid #06b6d4; border-radius: 16px;">
        <div class="modal-header" style="border-bottom: 1px solid rgba(6, 182, 212, 0.2);">
          <h5 class="modal-title" id="successModalLabel" style="color: #06b6d4; font-weight: 700;">
            <i class="bi bi-check-circle-fill"></i> ¬°Mensaje enviado!
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" style="color: #f3f3f3;">
          <p class="mb-0" id="successMessage">¬°Gracias! Recibimos tu mensaje y te responderemos a la brevedad.</p>
        </div>
        <div class="modal-footer" style="border-top: 1px solid rgba(6, 182, 212, 0.2);">
          <button type="button" class="btn btn-mg" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
(function(){
  const track = document.getElementById('mgSlides');
  const slider = document.getElementById('mgSlider');
  if(!track || !slider) return;
  const slides = Array.from(track.children);
  let i=0;
  const goto = n => { i=(n+slides.length)%slides.length; track.style.transform=`translateX(${-100*i}%)`; };
  slider.querySelector('.prev').onclick=()=>goto(i-1);
  slider.querySelector('.next').onclick=()=>goto(i+1);
  setInterval(()=>goto(i+1), 10000);
})();
</script>
<script>
// Contact form (frontend only): validate and show success alert
(function(){
  const form = document.getElementById('contactForm');
  const alertWrap = document.getElementById('contactAlert');
  if(!form) return;
  form.addEventListener('submit', function(e){
    e.preventDefault();
    // bootstrap validation styles
    if(!form.checkValidity()){
      form.classList.add('was-validated');
      return;
    }
    // gather values (optionally you can send them via fetch to a backend endpoint)
    const name = form.querySelector('#c_name').value.trim();
    const email = form.querySelector('#c_email').value.trim();
    const message = form.querySelector('#c_message').value.trim();

    // Actualizar mensaje del modal con el nombre
    const successMessage = document.getElementById('successMessage');
    successMessage.innerHTML = `<strong>¬°Gracias ${ name || '' }!</strong> Recibimos tu mensaje y te responderemos a la brevedad.`;
    
    // Mostrar modal de √©xito
    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
    successModal.show();
    
    // Resetear formulario
    form.reset();
    form.classList.remove('was-validated');
  });
})();
</script>
{% endblock %}
