{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}MiGym Registro{% endblock %}</title>
  
  <!-- Tipografía -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- CSS global -->
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/mg-confirm.css' %}">
  
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  
  <!-- Choices.js para selects con búsqueda -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js@10.2.0/public/assets/styles/choices.min.css">
  <link rel="stylesheet" href="{% static 'css/choices-custom.css' %}">
  
  {% block extra_css %}{% endblock %}
</head>
<body>

  <!-- Navbar dinámico -->
  {% block navbar %}{% endblock %}

  <!-- Contenido principal -->
  <main class="content-wrap" style="padding-bottom: 45px;">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer fijo -->
  <footer style="position: fixed; bottom: 0; left: 0; right: 0; background: #000; border-top: 1px solid #222; padding: 0.75rem; text-align: center; color: #888; font-size: 0.75rem; z-index: 999;">
    <p style="margin: 0;">© 2025 MiGym - Sistema de Gestión de Gimnasios</p>
  </footer>

  <div class="mg-confirm-backdrop" id="mgConfirmBackdrop" role="dialog" aria-modal="true" aria-labelledby="mgConfirmTitle">
  <div class="mg-confirm">
    <div class="mg-confirm__head">
      <span id="mgConfirmTitle">Confirmar acción</span>
    </div>
    <div class="mg-confirm__body" id="mgConfirmMsg">¿Estás seguro de continuar?</div>
    <div class="mg-confirm__foot">
      <button type="button" class="mg-btn mg-btn--muted" id="mgConfirmCancel">Cancelar</button>
      <button type="button" class="mg-btn mg-btn--danger" id="mgConfirmOk">Sí, continuar</button>
    </div>
  </div>
</div>

<script src="{% static 'js/main.js' %}"></script>
  <!-- <script src="{% static 'js/admin.js' %}"></script> DESHABILITADO: causa conflictos con sidebar -->
  <script src="{% static 'js/mg-confirm.js' %}"></script>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Choices.js para selects con búsqueda -->
  <script src="https://cdn.jsdelivr.net/npm/choices.js@10.2.0/public/assets/scripts/choices.min.js"></script>
  
  <!-- Inicializar Choices.js en todos los selects -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar en todos los select (excepto los que tengan clase .no-search)
      const selects = document.querySelectorAll('select:not(.no-search)');
      selects.forEach(function(select) {
        new Choices(select, {
          searchEnabled: true,
          searchPlaceholderValue: 'Buscar...',
          noResultsText: 'No se encontraron resultados',
          itemSelectText: 'Presiona para seleccionar',
          removeItemButton: false,
          shouldSort: false,
          placeholder: true,
          placeholderValue: select.getAttribute('data-placeholder') || 'Selecciona una opción',
        });
      });
    });
  </script>
  
  {% block extra_js %}{% endblock %}

</body>
</html>
